<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulación Punto de Venta (POS) - Beatpass</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Ocultar secciones por defecto */
        #pos-operations,
        #wristband-details {
            display: none;
        }

        /* Estilos adicionales si son necesarios */
        label {
            @apply block text-sm font-medium text-gray-700 mb-1;
        }

        input[type=text],
        input[type=email],
        input[type=password],
        input[type=number],
        input[type=tel] {
            @apply mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-500 focus:ring-opacity-50 sm:text-sm;
        }

        button {
            @apply font-bold py-2 px-4 rounded shadow transition duration-150 ease-in-out inline-flex items-center justify-center;
        }

        .btn-primary {
            @apply bg-indigo-600 hover:bg-indigo-700 text-white;
        }

        .btn-secondary {
            @apply bg-gray-200 hover:bg-gray-300 text-gray-800;
        }

        .btn-success {
            @apply bg-green-500 hover:bg-green-600 text-white;
        }

        .btn-danger {
            @apply bg-red-500 hover:bg-red-600 text-white;
        }

        .btn-warning {
            @apply bg-yellow-500 hover:bg-yellow-600 text-white;
        }

        .message {
            @apply p-4 mb-4 rounded-md text-sm;
        }

        .message-success {
            @apply bg-green-100 border border-green-400 text-green-700;
        }

        .message-error {
            @apply bg-red-100 border border-red-400 text-red-700;
        }
    </style>
</head>

<body class="bg-gray-100 p-5">

    <div class="max-w-xl mx-auto bg-white p-6 rounded-lg shadow-md">
        <h1 class="text-2xl font-bold text-center text-indigo-700 mb-6">Simulación POS Beatpass</h1>

        <div id="message-area" class="message" style="display: none;"></div>

        <div id="login-section">
            <h2 class="text-lg font-semibold mb-3">Iniciar Sesión (Cajero/Operador)</h2>
            <form id="login-form" class="space-y-3">
                <div>
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div>
                    <label for="password">Contraseña:</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="w-full btn-primary">Iniciar Sesión</button>
            </form>
        </div>

        <div id="pos-operations" class="space-y-6">
            <div class="flex justify-between items-center">
                <h2 class="text-lg font-semibold">Operaciones POS</h2>
                <button id="logout-button" class="text-sm btn-secondary">Cerrar Sesión</button>
            </div>

            <form id="search-wristband-form">
                <label for="search-uid">Buscar Pulsera por UID:</label>
                <div class="flex mt-1">
                    <input type="text" id="search-uid" name="codigoUid" required placeholder="Leer o introducir UID..."
                        class="flex-grow rounded-l-md">
                    <button type="submit"
                        class="bg-blue-600 hover:bg-blue-700 text-white rounded-r-md px-4">Buscar</button>
                </div>
            </form>

            <div id="wristband-details" class="p-4 bg-gray-50 border rounded">
                <h3 class="font-semibold mb-2">Detalles Pulsera</h3>
                <p><strong>UID:</strong> <span id="detail-uid"></span></p>
                <p><strong>Saldo:</strong> <span id="detail-saldo" class="font-bold"></span> €</p>
                <p><strong>Estado:</strong> <span id="detail-status"></span></p>
                <p><strong>Asociada a Entrada ID:</strong> <span id="detail-entrada-id"></span></p>
                <p><strong>Asistente:</strong> <span id="detail-asistente"></span></p>
                <p><strong>Festival:</strong> <span id="detail-festival"></span></p>
            </div>

            <div id="operation-forms" style="display: none;" class="space-y-6">

                <div class="border-t pt-4">
                    <h3 class="text-lg font-semibold mb-2">Asociar a Entrada</h3>
                    <form id="associate-form">
                        <input type="hidden" id="associate-uid" name="codigoUid">
                        <div>
                            <label for="associate-entrada-id">ID Entrada Asignada:</label>
                            <input type="number" id="associate-entrada-id" name="idEntradaAsignada" required min="1"
                                placeholder="ID de la entrada a asociar">
                        </div>
                        <button type="submit" class="mt-2 btn-primary w-full">Asociar Pulsera</button>
                    </form>
                </div>

                <div class="border-t pt-4">
                    <h3 class="text-lg font-semibold mb-2">Registrar Recarga</h3>
                    <form id="topup-form" class="space-y-3">
                        <input type="hidden" id="topup-uid" name="codigoUid">
                        <div>
                            <label for="topup-amount">Monto (€):</label>
                            <input type="number" id="topup-amount" name="monto" required min="0.01" step="0.01">
                        </div>
                        <div>
                            <label for="topup-method">Método Pago:</label>
                            <select id="topup-method" name="metodoPago">
                                <option>Efectivo</option>
                                <option>Tarjeta</option>
                                <option>Otro</option>
                            </select>
                        </div>
                        <button type="submit" class="w-full btn-success">Recargar</button>
                    </form>
                </div>

                <div class="border-t pt-4">
                    <h3 class="text-lg font-semibold mb-2">Registrar Consumo</h3>
                    <form id="consume-form" class="space-y-3">
                        <input type="hidden" id="consume-uid" name="codigoUid">
                        <input type="hidden" id="consume-festival-id" name="idFestival">
                        <div>
                            <label for="consume-amount">Monto (€):</label>
                            <input type="number" id="consume-amount" name="monto" required min="0.01" step="0.01">
                        </div>
                        <div>
                            <label for="consume-description">Descripción:</label>
                            <input type="text" id="consume-description" name="descripcion" required maxlength="100"
                                placeholder="Ej: Bebida, Comida">
                        </div>
                        <%-- Podríamos añadir campo para idPuntoVenta si fuera necesario --%>
                            <button type="submit" class="w-full btn-danger">Consumir</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="pos_simulation.js"></script>
</body>

</html>